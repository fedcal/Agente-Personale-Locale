<div class="chat-window">
  <div class="messages">
    <div *ngFor="let msg of messages" class="bubble" [class.user]="msg.role === 'user'" [class.assistant]="msg.role === 'assistant'">
      <div class="meta">{{ msg.role === 'user' ? 'Tu' : 'ARES' }}</div>
      <div>{{ msg.text }}</div>
    </div>
    <div *ngIf="!messages.length" class="placeholder">
      <div class="emoji">ğŸ¤–</div>
      <div class="title">Pronto ad aiutarti</div>
      <div class="subtitle">Scegli un modello, scrivi un messaggio o usa il microfono per dettare.</div>
      <ul>
        <li>Scrivi ciÃ² che vuoi chiedere o descrivere</li>
        <li>Premi Invio o il pulsante "Invia"</li>
        <li>Clicca ğŸ¤ per dettare (se supportato)</li>
      </ul>
    </div>
  </div>

  <div class="status">
    <span *ngIf="listening">ğŸ™ï¸ Ascolto in corso...</span>
    <span *ngIf="!listening && hasSpeech">ğŸ¤ Usa il microfono per dettare</span>
    <span *ngIf="!hasSpeech">Il tuo browser non supporta la dettatura</span>
  </div>

  <div class="input-area">
    <input [(ngModel)]="userInput"
           placeholder="Scrivi un messaggio o usa il microfono..."
           (keyup.enter)="send()" />
    <div class="actions">
      <button class="ghost" [disabled]="!hasSpeech" [class.active]="listening" (click)="toggleVoice()">
        {{ listening ? 'Stop' : 'ğŸ¤' }}
      </button>
      <button (click)="send()">Invia</button>
    </div>
  </div>
</div>
